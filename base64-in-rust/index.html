<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.1"/><meta name="description" content="Honestly, i have a confession to make. I have used base64 numerous times, I know why you use it. I&#x27;ve had a vague understanding of how it is implemented. But i have never ever fully understood how it works. Until now. Lets implement a basic base64 program in Rust." data-gatsby-head="true"/><meta property="og:title" content="Implementing base64 in rust" data-gatsby-head="true"/><meta property="og:description" content="Honestly, i have a confession to make. I have used base64 numerous times, I know why you use it. I&#x27;ve had a vague understanding of how it is implemented. But i have never ever fully understood how it works. Until now. Lets implement a basic base64 program in Rust." data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary" data-gatsby-head="true"/><meta name="twitter:creator" content="tandolf" data-gatsby-head="true"/><meta name="twitter:title" content="Implementing base64 in rust" data-gatsby-head="true"/><meta name="twitter:description" content="Honestly, i have a confession to make. I have used base64 numerous times, I know why you use it. I&#x27;ve had a vague understanding of how it is implemented. But i have never ever fully understood how it works. Until now. Lets implement a basic base64 program in Rust." data-gatsby-head="true"/><style data-href="/styles.8c1f2202249a84235a8e.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--global-font-size:15px;--global-line-height:1.4em;--global-space:10px;--font-stack:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;--mono-font-stack:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;--background-color:#fff;--page-width:60em;--font-color:#151515;--invert-font-color:#fff;--primary-color:#1a95e0;--secondary-color:#727578;--error-color:#d20962;--progress-bar-background:#727578;--progress-bar-fill:#151515;--code-bg-color:#e8eff2;--input-style:solid;--display-h1-decoration:none}*{box-sizing:border-box;text-rendering:geometricPrecision}::selection{background:var(--primary-color);color:var(--invert-font-color)}body{word-wrap:break-word;background-color:var(--background-color);color:var(--font-color);font-family:var(--font-stack);font-size:var(--global-font-size);margin:0}.logo,body,h1,h2,h3,h4,h5,h6{line-height:var(--global-line-height)}a{color:var(--primary-color);cursor:pointer;text-decoration:none}a:hover{background-color:var(--primary-color);color:var(--invert-font-color)}em{color:var(--font-color);font-family:var(--font-stack);font-size:var(--global-font-size);font-style:italic}blockquote,code,em,strong{line-height:var(--global-line-height)}.logo,blockquote,code,footer,h1,h2,h3,h4,h5,h6,header,li,ol,p,section,ul{float:none;margin:0;padding:0}.logo,blockquote,h1,ol,p,ul{margin-bottom:calc(var(--global-space)*2);margin-top:calc(var(--global-space)*2)}.logo,h1{display:inline-block;display:table-cell;font-weight:600;margin:0;overflow:hidden;padding:calc(var(--global-space)*2) 0 calc(var(--global-space)*2);position:relative}h1:after{bottom:5px;content:"====================================================================================================";display:var(--display-h1-decoration);left:0;position:absolute}.logo+*,h1+*{margin-top:0}h2,h3,h4,h5,h6{font-weight:600;margin-bottom:var(--global-line-height);position:relative}blockquote{overflow:hidden;padding-left:2ch;position:relative}blockquote:after{color:#9ca2ab;content:">\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>";left:0;line-height:var(--global-line-height);position:absolute;top:0;white-space:pre}code{background-color:var(--code-bg-color);font-family:var(--mono-font-stack);font-weight:inherit}code:after,code:before{content:"`";display:inline}pre code:after,pre code:before{content:""}pre{word-wrap:break-word;background-color:var(--background-color);border:1px solid var(--secondary-color);color:var(--secondary-color);display:block;padding:var(--global-space);white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-break:break-all}pre code{display:inline-block;font-family:var(--mono-font-stack);margin:0;min-width:100%;overflow-x:scroll;padding:0}.terminal .logo,.terminal blockquote,.terminal code,.terminal h1,.terminal h2,.terminal h3,.terminal h4,.terminal h5,.terminal h6,.terminal strong{color:var(--font-color);font-family:var(--font-stack);font-size:var(--global-font-size);font-style:normal}.terminal-prompt{position:relative;white-space:nowrap}.terminal-prompt:before{content:"> "}.terminal-prompt:after{-webkit-animation:cursor .8s infinite;animation:cursor .8s infinite;background:var(--primary-color);border-radius:0;bottom:-2px;content:"";display:inline-block;height:1em;margin-left:.2em;position:relative;width:3px}@-webkit-keyframes cursor{0%{opacity:0}50%{opacity:1}to{opacity:0}}@keyframes cursor{0%{opacity:0}50%{opacity:1}to{opacity:0}}li,li>ul>li{display:block;padding-left:calc(var(--global-space)*2);position:relative}nav>ul>li{padding-left:0}li:after{left:0;position:absolute;top:0}ul>li:after{content:"-"}nav ul>li:after{content:""}ol li:before{content:counters(item,".") ". ";counter-increment:item}ol ol li:before{content:counters(item,".") " ";counter-increment:item}.terminal-menu li:after,.terminal-menu li:before{display:none}ol{counter-reset:item}ol li:nth-child(n+10):after{left:-7px}ol ol{margin-bottom:0;margin-top:0}.terminal-menu{width:100%}.terminal-nav{align-items:flex-start;display:flex;flex-direction:column}ul ul{margin-bottom:0;margin-top:0}.terminal-menu ul{display:flex;flex-direction:column;flex-grow:1;font-size:var(--global-font-size);list-style-type:none;margin-top:0;padding:0!important;width:100%}.terminal-menu li{display:flex;margin:0 0 .5em;padding:0}ol.terminal-toc li{border-bottom:1px dotted var(--secondary-color);margin-bottom:15px;padding:0}.terminal-menu li:last-child{margin-bottom:0}ol.terminal-toc li a{background:var(--background-color);margin:4px 4px 4px 0;padding-right:4px;position:relative;text-align:left;top:6px}.terminal-menu li a:not(.btn){border:none;color:var(--secondary-color);display:block;text-decoration:none;width:100%}.terminal-menu li a.active{color:var(--font-color)}.terminal-menu li a:hover{background:0 0;color:inherit}ol.terminal-toc li:before{background:var(--background-color);bottom:-8px;content:counters(item,".") ". ";counter-increment:item;padding:4px 0 4px 4px;position:absolute;right:0}ol.terminal-toc li a:hover{background:var(--primary-color);color:var(--invert-font-color)}hr{border:0;border-bottom:1px dashed var(--secondary-color);margin:calc(var(--global-space)*4) 0;overflow:hidden;position:relative}p{color:var(--global-font-color);margin:0 0 var(--global-line-height)}.container{max-width:var(--page-width)}.container,.container-fluid{margin:0 auto;padding:0 calc(var(--global-space)*2)}img{width:100%}.progress-bar{background-color:var(--progress-bar-background);height:8px;margin:12px 0}.progress-bar.progress-bar-show-percent{margin-top:38px}.progress-bar-filled{background-color:var(--progress-bar-fill);height:100%;position:relative;transition:width .3s ease;width:0}.progress-bar-filled:before{border:6px solid transparent;border-top:6px solid var(--progress-bar-fill);content:"";position:absolute;right:-6px;top:-12px}.progress-bar-filled:after{border:6px solid transparent;color:var(--progress-bar-fill);content:attr(data-filled);display:block;font-size:12px;position:absolute;right:0;top:-38px;-webkit-transform:translateX(50%);transform:translateX(50%);white-space:nowrap}.progress-bar-no-arrow>.progress-bar-filled:after,.progress-bar-no-arrow>.progress-bar-filled:before{content:"";display:none;opacity:0;visibility:hidden}table{border-collapse:collapse;color:var(--font-color);font-size:var(--global-font-size);margin:var(--global-line-height) 0;width:100%}table td,table th{border:1px solid var(--font-color);font-size:1em;line-height:var(--global-line-height);padding:calc(var(--global-space)/2);vertical-align:top}table thead th{font-size:1em}table tfoot tr th{font-weight:500}table caption{font-size:1em;margin:0 0 1em}table tbody td:first-child{color:var(--secondary-color);font-weight:700}.form{width:100%}fieldset{border:1px solid var(--font-color);padding:1em}label{color:var(--font-color);font-size:1em}input[type=email],input[type=number],input[type=password],input[type=search],input[type=text]{-webkit-appearance:none;border:1px var(--input-style) var(--font-color);border-radius:0;font-family:var(--font-stack);font-size:1em;padding:.7em .5em;width:100%}input[type=email]:active,input[type=email]:focus,input[type=number]:active,input[type=number]:focus,input[type=password]:active,input[type=password]:focus,input[type=search]:active,input[type=search]:focus,input[type=text]:active,input[type=text]:focus{-webkit-appearance:none;border:1px solid var(--font-color);outline:0}input[type=email]:not(:placeholder-shown):invalid,input[type=number]:not(:placeholder-shown):invalid,input[type=password]:not(:placeholder-shown):invalid,input[type=search]:not(:placeholder-shown):invalid,input[type=text]:not(:placeholder-shown):invalid{border-color:var(--error-color)}input,textarea{background-color:var(--background-color);color:var(--font-color)}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:var(--secondary-color)!important;opacity:1}input::placeholder,textarea::placeholder{color:var(--secondary-color)!important;opacity:1}textarea{-webkit-appearance:none;border:1px var(--input-style) var(--font-color);border-radius:0;font-family:var(--font-stack);font-size:1em;height:auto;padding:.5em;resize:none;width:100%}textarea:focus{-webkit-appearance:none;border:1px solid var(--font-color);outline:0}textarea:not(:placeholder-shown):invalid{border-color:var(--error-color)}input:-webkit-autofill,input:-webkit-autofill:focus textarea:-webkit-autofill,input:-webkit-autofill:hover,select:-webkit-autofill,select:-webkit-autofill:focus,select:-webkit-autofill:hover,textarea:-webkit-autofill:hover textarea:-webkit-autofill:focus{-webkit-text-fill-color:var(--font-color);border:1px solid var(--font-color);box-shadow:0 0 0 1000px var(--invert-font-color) inset;-webkit-box-shadow:0 0 0 1000px var(--invert-font-color) inset;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.form-group{margin-bottom:var(--global-line-height);overflow:auto}.btn{align-items:center;border-style:solid;border-width:1px;cursor:pointer;display:inline-flex;font-family:inherit;font-size:1em;justify-content:center;outline:0;padding:.65em 2em;position:relative;-webkit-user-select:none;user-select:none;z-index:1}.btn:active{box-shadow:none}.btn.btn-ghost{background-color:transparent;border-color:var(--font-color);color:var(--font-color)}.btn.btn-ghost:focus,.btn.btn-ghost:hover{border-color:var(--tertiary-color);color:var(--tertiary-color);z-index:2}.btn.btn-ghost:hover{background-color:transparent}.btn-block{display:flex;width:100%}.btn-default{background-color:var(--font-color);border-color:var(--invert-font-color);color:var(--invert-font-color)}.btn-default:focus:not(.btn-ghost),.btn-default:hover{background-color:var(--secondary-color);color:var(--invert-font-color)}.btn-default.btn-ghost:focus,.btn-default.btn-ghost:hover{border-color:var(--secondary-color);color:var(--secondary-color);z-index:2}.btn-error{background-color:var(--error-color);border:1px solid var(--error-color);color:var(--invert-font-color)}.btn-error:focus:not(.btn-ghost),.btn-error:hover{background-color:var(--error-color);border-color:var(--error-color)}.btn-error.btn-ghost,.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{border-color:var(--error-color);color:var(--error-color)}.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{z-index:2}.btn-primary{background-color:var(--primary-color);border:1px solid var(--primary-color);color:var(--invert-font-color)}.btn-primary:focus:not(.btn-ghost),.btn-primary:hover{background-color:var(--primary-color);border-color:var(--primary-color)}.btn-primary.btn-ghost,.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{border-color:var(--primary-color);color:var(--primary-color)}.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{z-index:2}.btn-small{font-size:.9em!important;padding:.5em 1.3em!important}.btn-group{overflow:auto}.btn-group .btn{float:left}.btn-group .btn-ghost:not(:first-child){margin-left:-1px}.terminal-card{border:1px solid var(--secondary-color)}.terminal-card>header{background-color:var(--secondary-color);color:var(--invert-font-color);padding:.5em 0;text-align:center}.terminal-card>div:first-of-type{padding:var(--global-space)}.terminal-timeline{padding-left:70px;position:relative}.terminal-timeline:before{background:var(--secondary-color);content:" ";display:inline-block;height:100%;left:35px;position:absolute;width:2px;z-index:400}.terminal-timeline .terminal-card{margin-bottom:25px}.terminal-timeline .terminal-card:before{background:var(--invert-font-color);border:2px solid var(--secondary-color);content:" ";display:inline-block;height:15px;left:26px;margin-top:25px;position:absolute;width:15px;z-index:400}.terminal-alert{border:1px solid var(--font-color);color:var(--font-color);margin-bottom:var(--global-space);padding:1em}.terminal-alert-error{border-color:var(--error-color);color:var(--error-color)}.terminal-alert-primary{border-color:var(--primary-color);color:var(--primary-color)}@media screen and (max-width:960px){label{display:block;width:100%}pre::-webkit-scrollbar{height:3px}}@media screen and (max-width:480px){form{width:100%}}@media only screen and (min-width:30em){.terminal-menu ul,.terminal-nav{align-items:center;flex-direction:row}.terminal-menu ul{justify-content:flex-end;justify-items:flex-end;margin-top:calc(var(--global-space)*2)}.terminal-menu li{margin:0 2em 0 0}.terminal-menu li:last-child{margin-right:0}}.terminal-media:not(:last-child){margin-bottom:1.25rem}.terminal-media-left{padding-right:var(--global-space)}.terminal-media-left,.terminal-media-right{display:table-cell;vertical-align:top}.terminal-media-right{padding-left:var(--global-space)}.terminal-media-body{display:table-cell;vertical-align:top}.terminal-media-heading{font-size:1em;font-weight:700}.terminal-media-content{margin-top:.3rem}.terminal-placeholder{background-color:var(--secondary-color);border:1px solid var(--secondary-color);color:var(--font-color);font-size:1rem;text-align:center}figure>img{padding:0}.terminal-avatarholder{height:calc(var(--global-space)*5);width:calc(var(--global-space)*5)}.terminal-avatarholder img{padding:0}figure{margin:0}figure>figcaption{color:var(--secondary-color);text-align:center}.hljs{background:var(--block-background-color);color:var(--font-color);display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:var(--secondary-color)}.hljs-variable{color:var(--font-color)}.hljs-built_in,.hljs-keyword,.hljs-name,.hljs-selector-tag,.hljs-tag{color:var(--primary-color)}.hljs-addition,.hljs-attribute,.hljs-literal,.hljs-section,.hljs-string,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type{color:var(--secondary-color)}.hljs-deletion,.hljs-meta,.hljs-selector-attr,.hljs-selector-pseudo{color:var(--primary-color)}.hljs-doctag{color:var(--secondary-color)}.hljs-attr,.hljs-bullet,.hljs-link,.hljs-symbol{color:var(--primary-color)}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><title data-gatsby-head="true">Implementing base64 in rust | Gatsby Starter Blog</title><style data-styled="" data-styled-version="5.3.6">.fhWNNh{border-left-width:8px;border-left-style:solid;border-left-color:var(--primary-color);border-radius :5px;background-color:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px 16px 0px 16px;margin-bottom:21px;color:var(--font-color);}/*!sc*/
.fhWNNh div{font-size:22px;line-height:1.2em;}/*!sc*/
.fhWNNh em{color:var(--font-color);}/*!sc*/
.fhWNNh a{-webkit-text-decoration:underline;text-decoration:underline;color:var(--font-color);}/*!sc*/
.jxRnyg{border-left-width:8px;border-left-style:solid;border-left-color:var(--dark-danger-color);border-radius :5px;background-color:var(--danger-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px 16px 0px 16px;margin-bottom:21px;color:var(--font-color);}/*!sc*/
.jxRnyg div{font-size:undefinedpx;line-height:1.2em;}/*!sc*/
.jxRnyg em{color:var(--font-color);}/*!sc*/
.jxRnyg a{-webkit-text-decoration:underline;text-decoration:underline;color:var(--font-color);}/*!sc*/
data-styled.g1[id="AttentionBox__StyledWrapper-sc-y20oae-0"]{content:"fhWNNh,jxRnyg,"}/*!sc*/
.gRbVsB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-transform:uppercase;font-weight:bolder;margin-bottom:5px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g2[id="AttentionBox__Header-sc-y20oae-1"]{content:"gRbVsB,"}/*!sc*/
.hlSmGI{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-style:italic;font-weight:bolder;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;font-size:16px;}/*!sc*/
data-styled.g3[id="AttentionBox__Footer-sc-y20oae-2"]{content:"hlSmGI,"}/*!sc*/
.fWYNwT code{padding-left:5px;padding-right:5px;background-color:green;}/*!sc*/
data-styled.g4[id="AttentionBox__Content-sc-y20oae-3"]{content:"fWYNwT,"}/*!sc*/
.facmim{margin-right:7px;margin-bottom:0px;}/*!sc*/
data-styled.g5[id="AttentionBox__Icon-sc-y20oae-4"]{content:"facmim,"}/*!sc*/
.crIFBs{border-radius :5px;background-color:var(--header-font-color);display:inline-block;margin-right:6px;}/*!sc*/
data-styled.g7[id="Tag__StyledWrapper-sc-1wufizg-0"]{content:"crIFBs,"}/*!sc*/
.cjpKMj{font-size:14px;text-align:center;margin:2px 10px 2px;}/*!sc*/
data-styled.g8[id="Tag__Text-sc-1wufizg-1"]{content:"cjpKMj,"}/*!sc*/
.dnVzXH{margin-bottom:10px;}/*!sc*/
data-styled.g9[id="tagSection__StyledWrapper-sc-1aa460q-0"]{content:"dnVzXH,"}/*!sc*/
:root{--global-font-size:20px;--global-line-height:1.4em;--global-space:10px;--font-stack:Ubuntu Mono,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;--mono-font-stack:Ubuntu Mono,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;--background-color:#222225;--page-width:60em;--font-color:#e8e9ed;--font-dark-color:#151515;--header-font-color:#7a3496;--color-gray-700:#BFDBF7;--color-tertiary:#ffdf2c;--invert-font-color:#222225;--secondary-color:#1F7A8C;--tertiary-color:#a3abba;--primary-color:#62c4ff;--error-color:#A31621;--info-color:#62c4ff;--dark-info-color:#0DA2FB;--warning-color:#c7b02c;--dark-warning-color:#766400;--danger-color:#A31621;--dark-danger-color:#580006;--progress-bar-background:#3f3f44;--progress-bar-fill:#62c4ff;--code-bg-color:#3f3f44;--input-style:solid;--display-h1-decoration:none;--spacing-4:4rem;--spacing-0:0;--spacing-16:4rem;}/*!sc*/
body{background-color:var(--background-color);color:var(--font-color);}/*!sc*/
ol li::before{list-style-type:none;margin:0;padding:0;}/*!sc*/
.no-line::after{content:none;}/*!sc*/
code::after,code::before{content:none;}/*!sc*/
.mermaid{margin-top:4em;margin-bottom:4em;}/*!sc*/
.bio-avatar{margin-right:var(--spacing-4);margin-bottom:var(--spacing-0);min-width:50px;border-radius:100%;}/*!sc*/
.bio{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:var(--spacing-16);}/*!sc*/
.bio p{margin-top:0.8em;margin-bottom:var(--spacing-0);}/*!sc*/
h1{display:block;margin-top:150px;font-size:46px;margin-bottom:5px;}/*!sc*/
h2{margin-top:150px;margin-bottom:15px;font-size:36px;}/*!sc*/
h3{margin-bottom:2px;color:var(--dark-warning-color);font-size:26px;}/*!sc*/
h4{margin-bottom:2px;}/*!sc*/
p span{margin-top:30px !important;margin-bottom:30px !important;}/*!sc*/
ol li::before{display:inline;}/*!sc*/
data-styled.g12[id="sc-global-kRUHyZ1"]{content:"sc-global-kRUHyZ1,"}/*!sc*/
.gHswLm{font-size:14px;padding-bottom:10px;}/*!sc*/
data-styled.g13[id="footer__FooterText-sc-ora8l1-0"]{content:"gHswLm,"}/*!sc*/
.kLqMAm{margin:0 auto;max-width:70rem;background-color:var(--background-color);color:var(--font-color);}/*!sc*/
data-styled.g14[id="layout__Wrapper-sc-omnq36-0"]{content:"kLqMAm,"}/*!sc*/
.jJcppV{font-size:18px;}/*!sc*/
data-styled.g15[id="styles__LinkText-sc-ncn1p3-0"]{content:"jJcppV,"}/*!sc*/
.bqQJTT{font-size:18px;color:var(--color-gray-700);}/*!sc*/
data-styled.g16[id="styles__DateText-sc-ncn1p3-1"]{content:"bqQJTT,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=a93fb0266df267ec6acb2d350ad1fe0f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a93fb0266df267ec6acb2d350ad1fe0f"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="true"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__Wrapper-sc-omnq36-0 kLqMAm"><header class="terminal-nav"><div class="terminal-logo"><div class="logo terminal-prompt"><a class="menu-item" href="/">/home/toerktumlare/</a></div></div><nav class="terminal-menu"><ul><li><a class="menu-item" href="/">/home</a></li><li><a class="menu-item" href="/about">/about</a></li></ul></nav></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header style="margin-bottom:30px"><h1 itemProp="headline">Implementing base64 in rust</h1><h3 class="styles__DateText-sc-ncn1p3-1 bqQJTT">September 10, 2022</h3><div class="tagSection__StyledWrapper-sc-1aa460q-0 dnVzXH"><div class="Tag__StyledWrapper-sc-1wufizg-0 crIFBs"><p class="Tag__Text-sc-1wufizg-1 cjpKMj">#<!-- -->rust</p></div><div class="Tag__StyledWrapper-sc-1wufizg-0 crIFBs"><p class="Tag__Text-sc-1wufizg-1 cjpKMj">#<!-- -->binary</p></div></div></header><section itemProp="articleBody"><p>I have a confession to make. Please don’t think any less of me, but i have never really understood how Base64 <em>actually</em> works. I know what it is used for. I know when to use it and I have a vague understanding of how it is implemented, but i have never <strong>fully</strong> understood it. Until now.</p>
<p>I was looking at new things to implement and i stumbled across the <a href="https://www.rfc-editor.org/rfc/rfc4648">rfc for Base64</a> and thought to myself. <em>Maybe I can implement this, in rust</em>. So i sat down and read <a href="https://www.rfc-editor.org/rfc/rfc4648">rfc 4648</a> and started to understand how it actually works. I then googled a bit and looked at other implementations.</p>
<p>So in this post im going to try to explain what base64 is, a bit of how it works, and then we are going to implement a simple encoder and decoder.</p>
<h2>What is it used for?</h2>
<p>Lets look at how <a href="https://en.wikipedia.org/wiki/Base64">wikipedia</a> describes base64.</p>
<div font-size="22" class="AttentionBox__StyledWrapper-sc-y20oae-0 fhWNNh"><div class="AttentionBox__Header-sc-y20oae-1 gRbVsB"><div class="AttentionBox__Icon-sc-y20oae-4 facmim"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" style="vertical-align:middle" height="35" width="35" xmlns="http://www.w3.org/2000/svg"><path d="M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"></path></svg></div></div><div class="AttentionBox__Content-sc-y20oae-3 fWYNwT"><p>Base64 is designed to carry data stored in binary formats across channels that only reliably support text content.</p></div><div class="AttentionBox__Footer-sc-y20oae-2 hlSmGI">wikipedia</div></div>
<p>When we send information on the internet all servers can’t accept all formats of data. But one thing in common is that most servers can accept data in the form of text. This is where base64 comes into play. If a server can’t accept a certain format, we can always send the data as a textual representation of the data, then the server can accept the text and convert it into whatever format it needs to be on its and.</p>
<div class="AttentionBox__StyledWrapper-sc-y20oae-0 jxRnyg"><div class="AttentionBox__Header-sc-y20oae-1 gRbVsB"><div class="AttentionBox__Icon-sc-y20oae-4 facmim"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="vertical-align:middle" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M11 7h2v7h-2zm0 8h2v2h-2z"></path><path d="m21.707 7.293-5-5A.996.996 0 0 0 16 2H8a.996.996 0 0 0-.707.293l-5 5A.996.996 0 0 0 2 8v8c0 .266.105.52.293.707l5 5A.996.996 0 0 0 8 22h8c.266 0 .52-.105.707-.293l5-5A.996.996 0 0 0 22 16V8a.996.996 0 0 0-.293-.707zM20 15.586 15.586 20H8.414L4 15.586V8.414L8.414 4h7.172L20 8.414v7.172z"></path></svg></div>danger</div><div class="AttentionBox__Content-sc-y20oae-3 fWYNwT"><p>Important, Base64 is NOT encryption, its an encoding schema. We encode it and anyone has the ability to decode
it back. Don’t ever use Base64 on passwords or any other type of secret and think it will protect you. Anyone can decode Base64.</p></div></div>
<p>On the world wide web, base64 is very common to use when wanting to send send files like images and and css files using base64 as a textual representation of the data instead of sending the data itself. For instance you commonly use it when you want send email attachments and this is because the original SMTP protocol only supported <a href="https://en.wikipedia.org/wiki/ASCII">7-bit ascii</a> so there was a need to be able to represent data as text when sending emails.</p>
<p>Image below shows how base64 could be used when sending an image from one server to another server.</p>
<div><div class="mermaid">%%{init: {'theme':'dark'}}%%
graph LR
    A(image)-->B(encode base64)-- encoded-data -->C(decode base64)--> D(image)</div></div>
<ul>
<li>We encode our data into base64, a textual representation of the data.</li>
<li>We send that data to a receiving server or client</li>
<li>The server/client decodes the base64 encoded data and recreates the original data on the other side.</li>
</ul>
<h2>So what is base64 actually?</h2>
<p>On the internet there is a saying which goes as follows, <em>“there is no such thing as plain text”</em>. which is completely true. In the computer world all text is represented by 0 and 1’s. But if we have a series of bits then what text it represents depends on how we look at the bits. 3 bytes, represent 24 bits, (1 byte = 8 bits). But we can also think of 24 bits as 4 groups of 6 bits.</p>
<p>Here i’ll show you a visual representation taken straight out of the rfc which shows what im talking about.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--first octet--+-second octet--+--third octet--+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+---+-------+-------+---+-----------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--1.index--+--2.index--+--3.index--+--4.index--+</span></div></pre>
<p>As you can see here is that depending on how you decide to create your groups you can represent 24 bits as either 3 groups of 8 bits, or 4 groups of 6 bits. And this is the entire basics of the encoding and decoding using the base64 system.</p>
<p>You see 8 bits can represent 256 different numbers. While 6 bits can only represent 64. This means that if we take any binary representation of text and instead look at it as in groups of 6 bits. And then map these 64 numbers to a given set of letters. We suddenly have a way of encoding any data into a limited textual representation. This can then be sent to someone that maybe only can receive limited character set, to later be converted back into something more elaborate like for instance the russian or chinese alphabet.</p>
<p>So what letters are we representing with our limited set of 64 numbers?</p>
<p>The rfc show us just that.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    The Base </span><span class="token number">64</span><span class="token plain"> Alphabet</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> Value Encoding  Value Encoding  Value Encoding  Value Encoding</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">0</span><span class="token plain"> A            </span><span class="token number">17</span><span class="token plain"> R            </span><span class="token number">34</span><span class="token plain"> i            </span><span class="token number">51</span><span class="token plain"> z</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">1</span><span class="token plain"> B            </span><span class="token number">18</span><span class="token plain"> S            </span><span class="token number">35</span><span class="token plain"> j            </span><span class="token number">52</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">2</span><span class="token plain"> C            </span><span class="token number">19</span><span class="token plain"> T            </span><span class="token number">36</span><span class="token plain"> k            </span><span class="token number">53</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">3</span><span class="token plain"> D            </span><span class="token number">20</span><span class="token plain"> U            </span><span class="token number">37</span><span class="token plain"> l            </span><span class="token number">54</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">4</span><span class="token plain"> E            </span><span class="token number">21</span><span class="token plain"> V            </span><span class="token number">38</span><span class="token plain"> m            </span><span class="token number">55</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">5</span><span class="token plain"> F            </span><span class="token number">22</span><span class="token plain"> W            </span><span class="token number">39</span><span class="token plain"> n            </span><span class="token number">56</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">6</span><span class="token plain"> G            </span><span class="token number">23</span><span class="token plain"> X            </span><span class="token number">40</span><span class="token plain"> o            </span><span class="token number">57</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">7</span><span class="token plain"> H            </span><span class="token number">24</span><span class="token plain"> Y            </span><span class="token number">41</span><span class="token plain"> p            </span><span class="token number">58</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">8</span><span class="token plain"> I            </span><span class="token number">25</span><span class="token plain"> Z            </span><span class="token number">42</span><span class="token plain"> q            </span><span class="token number">59</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token number">9</span><span class="token plain"> J            </span><span class="token number">26</span><span class="token plain"> a            </span><span class="token number">43</span><span class="token plain"> r            </span><span class="token number">60</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">10</span><span class="token plain"> K            </span><span class="token number">27</span><span class="token plain"> b            </span><span class="token number">44</span><span class="token plain"> s            </span><span class="token number">61</span><span class="token plain"> </span><span class="token number">9</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">11</span><span class="token plain"> L            </span><span class="token number">28</span><span class="token plain"> c            </span><span class="token number">45</span><span class="token plain"> t            </span><span class="token number">62</span><span class="token plain"> +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">12</span><span class="token plain"> M            </span><span class="token number">29</span><span class="token plain"> d            </span><span class="token number">46</span><span class="token plain"> u            </span><span class="token number">63</span><span class="token plain"> /</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">13</span><span class="token plain"> N            </span><span class="token number">30</span><span class="token plain"> e            </span><span class="token number">47</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">14</span><span class="token plain"> O            </span><span class="token number">31</span><span class="token plain"> f            </span><span class="token number">48</span><span class="token plain"> w         </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pad</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">15</span><span class="token plain"> P            </span><span class="token number">32</span><span class="token plain"> g            </span><span class="token number">49</span><span class="token plain"> x</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token number">16</span><span class="token plain"> Q            </span><span class="token number">33</span><span class="token plain"> h            </span><span class="token number">50</span><span class="token plain"> y</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></pre>
<p>Here we can see the defined base64 alphabet. So by mapping each group of 6 bits to a number between 0-64 (using binary to real number conversion) we can then select the correct letter and in the end encode our data with a limited text range.</p>
<h2>Padding</h2>
<p>You can often spot a base64 string because its very common that the a base64 text representation ends with one or two equal signs (=). You see that in order for us to convert something we need to bits to line up.</p>
<p>Data that isn’t suitable for conversion.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--first octet--+-second octet--+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+---+-------+-------+---+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--1.index--+--2.index--+--3.index--+</span></div></pre>
<p>Here you can see that the data provided can’t really be converted since it it doesn’t evenly add up, so in these cases we often need to pad out the data by adding padding data. We usually add one or many <code>null</code> values to pad out. This padding will in the textual representation be shown as a <code>=</code> character.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--first octet--+-second octet--+--third octet--+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">7</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"> P A D D I N G </span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+---+-------+-------+---+-----------+</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">5</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">0</span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+--1.index--+--2.index--+--3.index--+--4.index--+</span></div></pre>
<p>So in the above example we added a single padding character to the end of the data so that the conversion in the end adds up evenly. The padding character in the base64 alphabet is represented by an <em>equal sign</em> and at most you need 2 equal signs in the and, which gives a base64 encoded string its classic look of a text string ending with up to 2 equal signs.</p>
<p>Some examples of strings that needed to be padded to be fit for encoding, notice the different amount of equal signs at the end.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">BASE64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;foob&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zm9vYg==&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">BASE64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;fooba&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zm9vYmE=&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">BASE64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;foobar&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zm9vYmFy&quot;</span><span class="token plain"></span></div></pre>
<p>Here is an example of how we solve this problem in code.</p>
<p>Below We check that the supplied data bytes are devisable by 3, if not we add the corresponding padding (1 or 2) <code>null</code> characters to the end of the supplied data, so that we can encode the data properly. Then at the end, of this code snippet, we remove the added padding and replace it with proper equal signs to show that we have padded our data.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// check if we need to add padding or not</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> input_length </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">chars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">%</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> padding</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> input_length </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> _ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> input_length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token number">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        padding</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;=&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// add null values to pad out the data</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;\0&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Code for encoding the data, omitted for abbr.</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// strip the null values after encoding</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">chars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">take</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result_length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">collect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// add on the correct number of equal signs to the and of the encoded string</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push_str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">padding</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<h2>Lets write an encoder</h2>
<p>To encode some data into base 64, we are going to split this up into 4 different steps. I will explain the steps as we go, but we will start out by creating a loop that will extract out 3 bytes at a time in a loop. Because as we explained earlier, we want to convert 3 groups of 8 bits, into 4 groups of 6 bytes.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> value_bytes </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">as_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> value_iter </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">chars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enumerate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">step_by</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> value_iter </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> char_number </span><span class="token operator">=</span><span class="token plain"> value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> char_number1 </span><span class="token operator">=</span><span class="token plain"> value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> char_number2 </span><span class="token operator">=</span><span class="token plain"> value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div></pre>
<p>Most of the code above is easy to understand except for maybe the last line. What we do in that last line is that we get the first 3 bytes, we then cast and bit shift each byte into its own “space” in a u32 representation.</p>
<p>Lastly we add them all together, so they all fit together nicely in their own space. The below representation shows how it works visually.</p>
<pre class="prism-code language-" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We extract a byte (for example FF which is hex value of the numeric value 255)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">1111 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// we then cast the value to a u32 (32bits) so we get some free space</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 0000 0000 1111 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// then we shift the value 16 steps to the left</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 1111 1111 0000 0000 0000 0000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We do the same with the second value but only shift it 8 bits</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 1111 1111 0000 0000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// the last value we only cast to a u32 (32 bits)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 0000 0000 1111 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// we then add them all together and each byte gets their own space</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 1111 1111 1111 1111 1111 1111</span></div></pre>
<p>So now we have a 32 bit representation of our 3 first bytes. Time to do the conversion, and we do it by doing some more bit shifting.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">char_number2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">18</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0x3F</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">12</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0x3F</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n3 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0x3F</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n4 </span><span class="token operator">=</span><span class="token plain"> n </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0x3F</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<p>To extract our 4, 6-bit numbers from our 32-bit number we need to do some more bit shifting. The above code does this, but if you read below the steps are explained but using the bit representations to show it more graphically.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We start out with our newly created </span><span class="token number">32</span><span class="token plain"> bit number</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // We </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"> bit </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">shift</span><span class="token plain"> it down </span><span class="token number">18</span><span class="token plain"> steps and mask off everything above the 6th bit</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // second value is created by a </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">shift</span><span class="token plain"> by </span><span class="token number">12</span><span class="token plain"> steps down and masked the same way</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // third we instead bit </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">shift</span><span class="token plain"> by </span><span class="token number">6</span><span class="token plain"> and mask off</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // And finally we don&#x27;t </span><span class="token function" style="color:rgb(80, 250, 123)">touch</span><span class="token plain"> the original value but mask it to get the last value</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 0011 </span><span class="token number">1111</span><span class="token plain"></span></div></pre>
<p>Now that we have our 4 new values, we can do a simple lookup table check to see what letter our new values represents and create as new string from it.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;B&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;C&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;D&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;E&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;F&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;G&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;H&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;I&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;J&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;K&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;L&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;M&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;N&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;O&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;P&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;Q&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;R&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;T&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;U&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;V&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;W&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;X&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;Y&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;Z&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;a&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;b&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;c&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;d&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;e&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;f&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;g&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;h&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;i&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;j&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;k&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;l&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;m&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;n&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;o&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;p&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;q&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;r&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;s&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;t&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;u&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;v&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;w&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;x&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;y&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;z&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;1&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;2&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;3&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;4&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;5&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;6&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;7&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;8&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;9&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;+&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">n1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">n2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c3 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">n3 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c4 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">n4 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<h2>And then a Decoder</h2>
<p>To decode, we basically just need to remove the padding, and then do the entire process but in reverse. One thing to remember is that before the decoder process can be run you will probably want to do some validation to make sure that what you are about to decode is a proper base64 string. I wont show that code here, but doing a regexp check that it includes only the allowed characters from the base64 alphabet will usually suffice.</p>
<p>So we start out by stripping off the padding, and replacing the equal signs with something else. Anything will work.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> suffix </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">ends_with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;==&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;AA&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">ends_with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token char" style="color:rgb(255, 121, 198)">&#x27;=&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;A&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// remove the equal signs</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> input </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> suffix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">to_string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// push new characters on the end if needed</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push_str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">suffix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<p>After the padding has been replaced, we enumerate, but this time 4 bytes at a time (instead of 3 like we did during the encoding process). We then get the value of each of the bytes and check their indexes in our array of Base64 characters that we used earlier.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> value_bytes </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">as_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> bytes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Vec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> input_iter </span><span class="token operator">=</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">chars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enumerate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">step_by</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> input_iter </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> v </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Decoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">index_of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> v1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Decoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">index_of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> v2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Decoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">index_of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> v3 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Decoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">index_of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">value_bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">index_of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usize</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token constant" style="color:rgb(189, 147, 249)">BASE64_CHARS</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">iter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">position</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token closure-params">c</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> c </span><span class="token operator">==</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unwrap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div></pre>
<p>Like before, we bit shift and mask, but this time we do it a little bit different because we want to go from 4 bytes, to 3 bytes per group.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">18</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">12</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v3 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<p>This time though, we need to shift things a little bit differently.</p>
<pre class="prism-code language-" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We extract a byte but this has only 6 bits in a 8 bit space</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0011 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// we then cast the alphabetic value to a u32 (32bits)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 0000 0000 0011 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// then we shift the value 18 steps to the left</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 1111 1100 0000 0000 0000 0000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We do the same with the second value but only shift it 12 bits</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0011 1111 1100 0000 0000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// the 3rd is shifted 6 bits</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 0000 1111 1100 0000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// And the 4th is not shifted at all</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 0000 0000 0000 0000 0011 1111</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// we then add them all together and each byte gets their own space</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 1111 1111 1111 1111 1111 1111</span></div></pre>
<p>After the extraction of the data, we need to shift the bits a little bit more to create our 3 groups of 8 bits that we can store in a proper byte array. That is done in the following way.</p>
<pre class="prism-code language-bash" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// We start out with our newly created </span><span class="token number">32</span><span class="token plain"> bit number</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // We </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"> bit </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">shift</span><span class="token plain"> it down </span><span class="token number">16</span><span class="token plain"> steps and mask off everything above the 8th bit</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // second value is created by a </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">shift</span><span class="token plain"> by </span><span class="token number">8</span><span class="token plain"> steps down and masked the same way</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   // third we dont shift, we just mask off</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&amp;</span><span class="token plain">  0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">------------------------------------------</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   0000 0000 0000 0000 0000 0000 </span><span class="token number">1111</span><span class="token plain"> </span><span class="token number">1111</span><span class="token plain"></span></div></pre>
<p>All of the operations above are done with the following code. And then we just push the decoded bytes onto a new list of <code>bytes</code>.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c </span><span class="token operator">=</span><span class="token plain"> n </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">16</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c1 </span><span class="token operator">=</span><span class="token plain"> n </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c2 </span><span class="token operator">=</span><span class="token plain"> n </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0xFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<p>Before we can convert this to a proper string we lastly need to remove the characters we used for padding, and then we convert the entire string to a utf-8 string that we can return.</p>
<pre class="prism-code language-rust" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// remove padding characters</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> _ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">suffix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">pop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// create a utf-8 string from the provided data</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> output </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">from_utf8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unwrap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div></pre>
<p>And thats it!</p>
<h2>Summary</h2>
<p>So in this post we have looked closer at what base64 is and what it is used for. We also looked at how to implement our own version of a base64 encoder and decoder. There are probably many more different ways and more efficient ways you can implement this to be more effective, but i found this to be fun and a learning experience. The entire code with a working example can be found on my <a href="https://github.com/Tandolf/base64">github</a>.</p>
<p>Until next time, have a nice one.</p></section><div class="tagSection__StyledWrapper-sc-1aa460q-0 dnVzXH"><div class="Tag__StyledWrapper-sc-1wufizg-0 crIFBs"><p class="Tag__Text-sc-1wufizg-1 cjpKMj">#<!-- -->rust</p></div><div class="Tag__StyledWrapper-sc-1wufizg-0 crIFBs"><p class="Tag__Text-sc-1wufizg-1 cjpKMj">#<!-- -->binary</p></div></div><hr/><footer><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#181818;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/688f707e139e1c5b3b1adc848f4464fb/d4bf4/selfie.avif 50w,/static/688f707e139e1c5b3b1adc848f4464fb/ee81f/selfie.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/688f707e139e1c5b3b1adc848f4464fb/3faea/selfie.webp 50w,/static/688f707e139e1c5b3b1adc848f4464fb/6a679/selfie.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/688f707e139e1c5b3b1adc848f4464fb/d24ee/selfie.jpg" data-srcset="/static/688f707e139e1c5b3b1adc848f4464fb/d24ee/selfie.jpg 50w,/static/688f707e139e1c5b3b1adc848f4464fb/64618/selfie.jpg 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/688f707e139e1c5b3b1adc848f4464fb/d4bf4/selfie.avif 50w,/static/688f707e139e1c5b3b1adc848f4464fb/ee81f/selfie.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/688f707e139e1c5b3b1adc848f4464fb/3faea/selfie.webp 50w,/static/688f707e139e1c5b3b1adc848f4464fb/6a679/selfie.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/688f707e139e1c5b3b1adc848f4464fb/d24ee/selfie.jpg" srcSet="/static/688f707e139e1c5b3b1adc848f4464fb/d24ee/selfie.jpg 50w,/static/688f707e139e1c5b3b1adc848f4464fb/64618/selfie.jpg 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><p>Written by <strong>Thomas Andolf</strong> <!-- -->I dont have twitter but i have<!-- --> <a href="https://www.linkedin.com/in/thomas-andolf-60966534">linkedin</a> <!-- -->and im on<!-- --> <a href="https://stackoverflow.com/users/1840146">stack overflow</a>.</p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/cve-2020-0601/"><h3 class="styles__LinkText-sc-ncn1p3-0 jJcppV">← <!-- -->What was CVE 2020–0601 aka. Curveball?</h3></a></li><li><a rel="next" href="/anatomy-of-dns/"><h3 class="styles__LinkText-sc-ncn1p3-0 jJcppV">A DNS-message breakdown no one asked for<!-- --> →</h3></a></li></ul></nav></main><footer><h3 class="footer__FooterText-sc-ora8l1-0 gHswLm">© <!-- -->2023<!-- -->, Built by<!-- --> <a href="http://www.github.com/tandolf">toerktumlare</a></h3></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/base64-in-rust/";window.___webpackCompilationHash="d561acbb15b44e731b5f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-afa68794cf9a69af341a.js"],"app":["/app-da0e5fbb4b5276d7ef81.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-6036be1a08e62eb825b9.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-72b717bd1ae7437cf1cd.js"],"component---src-pages-index-tsx":[],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-anatomy-of-dns-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-anatomy-of-dns-index-mdx-0979d3b4f78a5bb3a002.js"],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-base-64-in-rust-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-base-64-in-rust-index-mdx-6acd2f2982af7e42be63.js"],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-cve-2020-0601-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-cve-2020-0601-index-mdx-6e065da63338c67b563c.js"],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-dns-compression-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-dns-compression-index-mdx-abe96fa6b044c80fb672.js"],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-hello-world-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-hello-world-index-mdx-da239a0014ab7f34b5e1.js"],"component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-monad-in-java-index-mdx":["/component---src-templates-blog-post-tsx-content-file-path-home-thomas-documents-code-js-blog-content-blog-monad-in-java-index-mdx-ba07fbb206a4681465a3.js"]};/*]]>*/</script><script src="/polyfill-afa68794cf9a69af341a.js" nomodule=""></script><script src="/app-da0e5fbb4b5276d7ef81.js" async=""></script><script src="/framework-20708a169de42a473112.js" async=""></script><script src="/webpack-runtime-53f6fe2a2ba4843a4939.js" async=""></script></body></html>